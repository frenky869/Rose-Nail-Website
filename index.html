<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rose Nails | Nail Technician Booking</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- ========== ADD THESE 3 LINES ========== -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="supabase-functions.js"></script>
    <!-- ====================================== -->
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        serif: ['Playfair Display', 'serif'],
                        sans: ['Montserrat', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            pink: '#FCE7F3',
                            rose: '#BE185D',
                            gold: '#D4AF37',
                            dark: '#1F2937',
                        }
                    }
                }
            }
        }
        
        // ========== ADD THIS SUPABASE CONFIG ==========
        // REPLACE WITH YOUR ACTUAL CREDENTIALS
        const supabaseUrl = 'https://pfuvcamzqqbudrjphuyw.supabase.co';
        const supabaseAnonKey = 'sb_publishable_1aOEJQ1iOqo5-c3mcomqcQ_uLqsuiuW';
        
        // Initialize Supabase
        const supabase = window.supabase.createClient(supabaseUrl, supabaseAnonKey, {
            auth: {
                persistSession: false,
                autoRefreshToken: false
            }
        });
        
        // Make available globally
        window.supabaseClient = supabase;
        // ==============================================
    </script>
  
    <style>
        .fade-in {
            animation: fadeIn 0.8s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .modal {
            transition: opacity 0.3s ease, visibility 0.3s ease;
            opacity: 0;
            visibility: hidden;
        }
        .modal.active {
            opacity: 1;
            visibility: visible;
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #BE185D;
            border-radius: 4px;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">

    <!-- Navigation -->
    <nav class="bg-white/95 backdrop-blur-sm sticky top-0 z-50 shadow-sm border-b border-brand-pink">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-serif font-bold text-brand-rose tracking-wider">Rose Nails</a>
            
            <div class="hidden md:flex space-x-8 text-sm font-medium text-gray-600">
                <a href="#services" class="hover:text-brand-rose transition-colors uppercase tracking-widest">Services</a>
                <a href="#gallery" class="hover:text-brand-rose transition-colors uppercase tracking-widest">Gallery</a>
                <a href="#about" class="hover:text-brand-rose transition-colors uppercase tracking-widest">About</a>
                <a href="#contact" class="hover:text-brand-rose transition-colors uppercase tracking-widest">Contact</a>
            </div>

            <a href="#book" class="bg-brand-rose text-white px-6 py-2 rounded-full font-medium hover:bg-pink-700 transition-all shadow-lg shadow-pink-200">
                Book Now
            </a>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="relative h-[85vh] flex items-center justify-center overflow-hidden bg-brand-pink/30">
        <!-- Decorative Background Circle -->
        <div class="absolute -top-20 -right-20 w-96 h-96 bg-brand-pink rounded-full blur-3xl opacity-50"></div>
        <div class="absolute -bottom-20 -left-20 w-96 h-96 bg-pink-200 rounded-full blur-3xl opacity-50"></div>

        <div class="container mx-auto px-6 flex flex-col md:flex-row items-center gap-12 relative z-10">
            <div class="md:w-1/2 text-center md:text-left fade-in">
                <span class="text-brand-rose font-bold tracking-widest text-sm uppercase mb-4 block">Premium Beauty Services</span>
                <h1 class="text-5xl md:text-7xl font-serif font-bold text-gray-900 mb-6 leading-tight">
                    Beauty at Your <br><span class="text-transparent bg-clip-text bg-gradient-to-r from-brand-rose to-pink-400">Fingertips</span>
                </h1>
                <p class="text-lg text-gray-600 mb-8 leading-relaxed max-w-md mx-auto md:mx-0">
                    Experience top-tier manicures, hair styling, lashes, and custom nail art in a relaxing environment.
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center md:justify-start">
                    <a href="#book" class="bg-gray-900 text-white px-8 py-4 rounded-none font-bold hover:bg-gray-800 transition-colors uppercase tracking-wider">
                        Book Appointment
                    </a>
                    <a href="#services" class="border border-gray-900 text-gray-900 px-8 py-4 rounded-none font-bold hover:bg-gray-50 transition-colors uppercase tracking-wider">
                        View Menu
                    </a>
                </div>
            </div>
            <div class="md:w-1/2 relative fade-in" style="animation-delay: 0.2s;">
                <div class="relative z-10 rounded-t-full overflow-hidden shadow-2xl border-4 border-white h-[500px] w-full max-w-md mx-auto">
                    <img src="https://image.pollinations.ai/prompt/elegant%20woman%20showing%20beautiful%20acrylic%20nails%20with%20gold%20details%20fashion%20photography%20soft%20pink%20background?width=600&height=800&nologo=true" alt="Nail Art" class="w-full h-full object-cover">
                </div>
                <!-- Floating Elements -->
                <div class="absolute top-10 -right-4 bg-white p-4 shadow-xl rounded-lg animate-bounce duration-[3000ms]">
                    <p class="font-serif text-brand-rose text-2xl font-bold">5.0 â˜…</p>
                    <p class="text-xs text-gray-500 uppercase tracking-wide">Top Rated</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="py-24 bg-white">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-serif font-bold text-gray-900 mb-4">Our Menu</h2>
                <div class="w-16 h-1 bg-brand-rose mx-auto"></div>
                <p class="mt-4 text-gray-500">Nails, Hair, and Lashes.</p>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Service: Manicure -->
                <div class="group bg-brand-pink/10 hover:bg-brand-pink/30 p-8 rounded-2xl transition-colors cursor-pointer border border-transparent hover:border-brand-pink" onclick="selectService('Manicure', 350)">
                    <div class="h-12 w-12 bg-brand-rose text-white rounded-full flex items-center justify-center mb-6">
                        <span class="font-bold text-lg">01</span>
                    </div>
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="text-xl font-bold font-serif">Manicure</h3>
                        <span class="text-brand-rose font-bold">KES 350</span>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">Classic nail shaping, cuticle care, and cleaning.</p>
                    <button class="text-sm font-bold uppercase tracking-wider text-gray-900 group-hover:text-brand-rose transition-colors flex items-center">
                        Book This <span class="ml-2">&rarr;</span>
                    </button>
                </div>

                <!-- Service: Pedicure -->
                <div class="group bg-brand-pink/10 hover:bg-brand-pink/30 p-8 rounded-2xl transition-colors cursor-pointer border border-transparent hover:border-brand-pink" onclick="selectService('Pedicure', 500)">
                    <div class="h-12 w-12 bg-brand-rose text-white rounded-full flex items-center justify-center mb-6">
                        <span class="font-bold text-lg">02</span>
                    </div>
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="text-xl font-bold font-serif">Pedicure</h3>
                        <span class="text-brand-rose font-bold">KES 500</span>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">Relaxing foot soak, scrub, nail trimming, and cleaning.</p>
                    <button class="text-sm font-bold uppercase tracking-wider text-gray-900 group-hover:text-brand-rose transition-colors flex items-center">
                        Book This <span class="ml-2">&rarr;</span>
                    </button>
                </div>

                <!-- Service 1: Plain Gel -->
                <div class="group bg-brand-pink/10 hover:bg-brand-pink/30 p-8 rounded-2xl transition-colors cursor-pointer border border-transparent hover:border-brand-pink" onclick="selectService('Plain Gel', 350)">
                    <div class="h-12 w-12 bg-brand-rose text-white rounded-full flex items-center justify-center mb-6">
                        <span class="font-bold text-lg">03</span>
                    </div>
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="text-xl font-bold font-serif">Plain Gel</h3>
                        <span class="text-brand-rose font-bold">KES 350</span>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">Simple, elegant gel polish application.</p>
                    <button class="text-sm font-bold uppercase tracking-wider text-gray-900 group-hover:text-brand-rose transition-colors flex items-center">
                        Book This <span class="ml-2">&rarr;</span>
                    </button>
                </div>

                <!-- Service 2: Nail Gel -->
                <div class="group bg-brand-pink/10 hover:bg-brand-pink/30 p-8 rounded-2xl transition-colors cursor-pointer border border-transparent hover:border-brand-pink" onclick="selectService('Nail Gel', 600)">
                    <div class="h-12 w-12 bg-brand-rose text-white rounded-full flex items-center justify-center mb-6">
                        <span class="font-bold text-lg">04</span>
                    </div>
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="text-xl font-bold font-serif">Nail Gel</h3>
                        <span class="text-brand-rose font-bold">KES 600</span>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">Long-lasting gel application.</p>
                    <button class="text-sm font-bold uppercase tracking-wider text-gray-900 group-hover:text-brand-rose transition-colors flex items-center">
                        Book This <span class="ml-2">&rarr;</span>
                    </button>
                </div>

                <!-- Service 3: Builder Gel & Tips -->
                <div class="group bg-brand-pink/10 hover:bg-brand-pink/30 p-8 rounded-2xl transition-colors cursor-pointer border border-transparent hover:border-brand-pink" onclick="selectService('Builder Gel & Tips', 800)">
                    <div class="h-12 w-12 bg-brand-rose text-white rounded-full flex items-center justify-center mb-6">
                        <span class="font-bold text-lg">05</span>
                    </div>
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="text-xl font-bold font-serif">Builder Gel & Tips</h3>
                        <span class="text-brand-rose font-bold">KES 800</span>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">Stronger overlay with tips for added length.</p>
                    <button class="text-sm font-bold uppercase tracking-wider text-gray-900 group-hover:text-brand-rose transition-colors flex items-center">
                        Book This <span class="ml-2">&rarr;</span>
                    </button>
                </div>

                <!-- Service 4: Gum Gel -->
                <div class="group bg-brand-pink/10 hover:bg-brand-pink/30 p-8 rounded-2xl transition-colors cursor-pointer border border-transparent hover:border-brand-pink" onclick="selectService('Gum Gel', 1800)">
                    <div class="h-12 w-12 bg-brand-rose text-white rounded-full flex items-center justify-center mb-6">
                        <span class="font-bold text-lg">06</span>
                    </div>
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="text-xl font-bold font-serif">Gum Gel (Polygel)</h3>
                        <span class="text-brand-rose font-bold">KES 1,800</span>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">Hybrid gel for lightweight, durable extensions.</p>
                    <button class="text-sm font-bold uppercase tracking-wider text-gray-900 group-hover:text-brand-rose transition-colors flex items-center">
                        Book This <span class="ml-2">&rarr;</span>
                    </button>
                </div>

                <!-- Service 5: Acrylic Full Set -->
                <div class="group bg-brand-pink/10 hover:bg-brand-pink/30 p-8 rounded-2xl transition-colors cursor-pointer border border-transparent hover:border-brand-pink" onclick="selectService('Acrylic Full Set', 2500)">
                    <div class="h-12 w-12 bg-brand-rose text-white rounded-full flex items-center justify-center mb-6">
                        <span class="font-bold text-lg">07</span>
                    </div>
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="text-xl font-bold font-serif">Acrylic Full Set</h3>
                        <span class="text-brand-rose font-bold">KES 2,500</span>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">Classic acrylic extensions for maximum length and strength.</p>
                    <button class="text-sm font-bold uppercase tracking-wider text-gray-900 group-hover:text-brand-rose transition-colors flex items-center">
                        Book This <span class="ml-2">&rarr;</span>
                    </button>
                </div>

                <!-- Service 6: Additional Art -->
                <div class="group bg-brand-pink/10 hover:bg-brand-pink/30 p-8 rounded-2xl transition-colors cursor-pointer border border-transparent hover:border-brand-pink" onclick="selectService('Nail Art (Per Nail)', 50)">
                    <div class="h-12 w-12 bg-brand-rose text-white rounded-full flex items-center justify-center mb-6">
                        <span class="font-bold text-lg">08</span>
                    </div>
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="text-xl font-bold font-serif">Additional Art</h3>
                        <span class="text-brand-rose font-bold">KES 50 /nail</span>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">Custom designs, stones, and creative art per finger.</p>
                    <button class="text-sm font-bold uppercase tracking-wider text-gray-900 group-hover:text-brand-rose transition-colors flex items-center">
                        Book This <span class="ml-2">&rarr;</span>
                    </button>
                </div>

                <!-- Service 7: Hair & Lashes -->
                <div class="group bg-brand-pink/10 hover:bg-brand-pink/30 p-8 rounded-2xl transition-colors cursor-pointer border border-transparent hover:border-brand-pink" onclick="selectService('Hair/Lashes', 0)">
                    <div class="h-12 w-12 bg-brand-rose text-white rounded-full flex items-center justify-center mb-6">
                        <span class="font-bold text-lg">09</span>
                    </div>
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="text-xl font-bold font-serif">Hair & Lashes</h3>
                        <span class="text-brand-rose font-bold text-sm">Inquire</span>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">Professional hair styling and eyelash extensions.</p>
                    <button class="text-sm font-bold uppercase tracking-wider text-gray-900 group-hover:text-brand-rose transition-colors flex items-center">
                        Book This <span class="ml-2">&rarr;</span>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Gallery Section -->
    <section id="gallery" class="py-20 bg-gray-900 text-white">
        <div class="container mx-auto px-6">
            <div class="flex flex-col md:flex-row justify-between items-end mb-12">
                <div>
                    <span class="text-brand-rose font-bold tracking-widest text-sm uppercase">Portfolio</span>
                    <h2 class="text-4xl font-serif font-bold mt-2">Latest Works</h2>
                </div>
                <a href="https://instagram.com" target="_blank" class="hidden md:inline-block border-b border-brand-rose pb-1 hover:text-brand-rose transition-colors">View Instagram</a>
            </div>

            <!-- Single Image Layout -->
            <div class="relative group overflow-hidden rounded-lg shadow-2xl max-w-4xl mx-auto h-[600px]">
                <img src="nail.jpeg "width=1200&height=800&nologo=true" alt="Latest Work" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105">
                <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-8">
                    <div>
                        <p class="font-serif text-2xl font-bold">Signature Design</p>
                        <p class="text-gray-300 mt-2">Check out our Instagram for more!</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Booking Section -->
    <section id="book" class="py-24 bg-brand-pink/20">
        <div class="container mx-auto px-6 max-w-4xl">
            <div class="bg-white rounded-3xl shadow-2xl overflow-hidden flex flex-col md:flex-row">
                <div class="md:w-1/3 bg-brand-rose text-white p-10 flex flex-col justify-between">
                    <div>
                        <h3 class="text-3xl font-serif font-bold mb-4">Book Your Visit</h3>
                        <p class="text-pink-100 mb-8">We can't wait to pamper you. Please fill out the form to request an appointment.</p>
                        <div class="space-y-4">
                            <div class="flex items-center">
                                <span class="font-bold mr-3">Mon - Fri:</span> 9:00 AM - 7:00 PM
                            </div>
                            <div class="flex items-center">
                                <span class="font-bold mr-3">Saturday:</span> 10:00 AM - 6:00 PM
                            </div>
                            <div class="flex items-center">
                                <span class="font-bold mr-3">Sunday:</span> Closed
                            </div>
                        </div>
                    </div>
                    <div class="mt-8">
                        <p class="text-sm opacity-75">Deposit not required for booking.</p>
                    </div>
                </div>
                
                <div class="md:w-2/3 p-10">
                    <form id="booking-form" onsubmit="submitBooking(event)">
                        <div class="grid md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-2">Name</label>
                                <input type="text" id="client-name" class="w-full bg-gray-50 border border-gray-200 rounded-lg px-4 py-3 focus:outline-none focus:border-brand-rose focus:bg-white transition-colors" required>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-2">Phone</label>
                                <input type="tel" id="client-phone" class="w-full bg-gray-50 border border-gray-200 rounded-lg px-4 py-3 focus:outline-none focus:border-brand-rose focus:bg-white transition-colors" required>
                            </div>
                        </div>

                        <div class="mb-6">
                            <label class="block text-sm font-bold text-gray-700 mb-2">Service</label>
                            <select id="service-select" class="w-full bg-gray-50 border border-gray-200 rounded-lg px-4 py-3 focus:outline-none focus:border-brand-rose focus:bg-white transition-colors">
                                <option value="">Select a Service...</option>
                                <option value="Manicure">Manicure - KES 350</option>
                                <option value="Pedicure">Pedicure - KES 500</option>
                                <option value="Plain Gel">Plain Gel - KES 350</option>
                                <option value="Nail Gel">Nail Gel - KES 600</option>
                                <option value="Builder Gel & Tips">Builder Gel & Tips - KES 800</option>
                                <option value="Gum Gel">Gum Gel - KES 1,800</option>
                                <option value="Acrylic Full Set">Acrylic Full Set - KES 2,500</option>
                                <option value="Nail Art">Additional Art - KES 50/nail</option>
                                <option value="Lashes">Lashes - Inquire</option>
                                <option value="Hair Appointment">Hair Appointment - Inquire</option>
                            </select>
                        </div>

                        <div class="grid md:grid-cols-2 gap-6 mb-8">
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-2">Date</label>
                                <input type="date" id="book-date" class="w-full bg-gray-50 border border-gray-200 rounded-lg px-4 py-3 focus:outline-none focus:border-brand-rose focus:bg-white transition-colors" required>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-2">Time</label>
                                <select id="book-time" class="w-full bg-gray-50 border border-gray-200 rounded-lg px-4 py-3 focus:outline-none focus:border-brand-rose focus:bg-white transition-colors" required>
                                    <option>09:00 AM</option>
                                    <option>10:00 AM</option>
                                    <option>11:00 AM</option>
                                    <option>12:00 PM</option>
                                    <option>01:00 PM</option>
                                    <option>02:00 PM</option>
                                    <option>03:00 PM</option>
                                    <option>04:00 PM</option>
                                    <option>05:00 PM</option>
                                </select>
                            </div>
                        </div>

                        <button type="submit" class="w-full bg-gray-900 text-white font-bold py-4 rounded-lg hover:bg-gray-800 transition-colors shadow-lg uppercase tracking-widest flex justify-center items-center gap-2">
                            <span>Confirm Booking</span>
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="contact" class="bg-gray-900 text-gray-400 py-16">
        <div class="container mx-auto px-6 grid md:grid-cols-3 gap-12">
            <div>
                <h3 class="text-2xl font-serif text-brand-rose font-bold mb-6">Rose Nails</h3>
                <p class="mb-4">Elevating nail care to an art form. Join us for a moment of luxury and walk out with confidence.</p>
            </div>
            <div>
                <h4 class="text-white font-bold uppercase tracking-wider mb-6">Location</h4>
                <p>123 Juja</p>
                <p>Juja, Kenya</p>
                <p class="mt-4">JKUAT gate C</p>
            </div>
            <div>
                <h4 class="text-white font-bold uppercase tracking-wider mb-6">Contact</h4>
                <p class="flex items-center mb-2">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                    +254 739 684 403
                </p>
                <p class="flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                    book@rosenails.co.ke
                </p>
            </div>
        </div>
        <div class="border-t border-gray-800 mt-12 pt-8 text-center text-sm">
            <p>&copy; 2025 Rose Nails. All rights reserved.</p>
        </div>
    </footer>

    <!-- Confirmation Modal -->
    <!-- Confirmation Modal -->
<div id="success-modal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm">
    <div class="bg-white p-8 rounded-2xl shadow-2xl max-w-sm text-center m-4 transform transition-all scale-100">
        <div class="h-16 w-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
            <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
        </div>
        <h3 class="text-2xl font-serif font-bold text-gray-900 mb-2">Booking Received!</h3>
        <p class="text-gray-600 mb-3">Thank you, <span id="modal-name" class="font-bold"></span>!</p>
        <div class="bg-gray-50 p-4 rounded-lg mb-4 text-left">
            <p class="mb-1"><span class="font-bold">Service:</span> <span id="modal-service"></span></p>
            <p class="mb-1"><span class="font-bold">Date:</span> <span id="modal-date"></span></p>
            <p class="mb-1"><span class="font-bold">Time:</span> <span id="modal-time"></span></p>
        </div>
        <p class="text-sm text-gray-500 mb-6">We will call you shortly to confirm.</p>
        <button onclick="closeModal()" class="bg-brand-rose text-white px-8 py-3 rounded-lg font-bold hover:bg-pink-700 transition-colors w-full">
            Great!
        </button>
    </div>
</div>

<script>
    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            document.querySelector(this.getAttribute('href')).scrollIntoView({
                behavior: 'smooth'
            });
        });
    });

    // Set minimum date to today when page loads
    document.addEventListener('DOMContentLoaded', function() {
        const dateInput = document.getElementById('book-date');
        if (dateInput) {
            const today = new Date().toISOString().split('T')[0];
            dateInput.min = today;
            
            // Pre-fill with tomorrow
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            dateInput.value = tomorrow.toISOString().split('T')[0];
        }
        
        // Format phone input
        const phoneInput = document.getElementById('client-phone');
        if (phoneInput) {
            phoneInput.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.startsWith('0')) {
                    value = '254' + value.substring(1);
                } else if (!value.startsWith('254')) {
                    value = '254' + value;
                }
                e.target.value = value.substring(0, 12);
            });
        }
    });

    // Pre-select service in booking form
    function selectService(serviceName) {
        const select = document.getElementById('service-select');
        for(let i = 0; i < select.options.length; i++) {
            if(select.options[i].text.includes(serviceName)) {
                select.selectedIndex = i;
                break;
            }
        }
        document.getElementById('book').scrollIntoView({ behavior: 'smooth' });
    }

    // Handle Booking Submission with Supabase
    async function submitBooking(e) {
        e.preventDefault();
        
        const submitBtn = e.target.querySelector('button[type="submit"]');
        const originalText = submitBtn.innerHTML;
        
        try {
            // Show loading state
            submitBtn.innerHTML = '<div class="inline-block h-5 w-5 animate-spin rounded-full border-2 border-solid border-white border-r-transparent"></div>';
            submitBtn.disabled = true;
            
            // Collect form data
            const formData = {
                name: document.getElementById('client-name').value.trim(),
                phone: document.getElementById('client-phone').value.trim(),
                service: document.getElementById('service-select').value,
                serviceText: document.getElementById('service-select').options[document.getElementById('service-select').selectedIndex].text,
                date: document.getElementById('book-date').value,
                time: document.getElementById('book-time').value
            };
            
            // Validate form
            const errors = window.supabaseFunctions.validateBookingForm(formData);
            if (errors.length > 0) {
                alert('Please fix the following errors:\n\n' + errors.join('\n'));
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
                return;
            }
            
            // Check availability
            const availability = await window.supabaseFunctions.checkAvailability(formData.date, formData.time);
            if (!availability.available) {
                alert('Sorry, this time slot is already booked. Please select another time.');
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
                return;
            }
            
            // Create appointment in Supabase
            const appointmentData = {
                client_name: formData.name,
                client_phone: formData.phone,
                service: formData.serviceText,
                appointment_date: formData.date,
                appointment_time: formData.time,
                status: 'pending'
            };
            
            const result = await window.supabaseFunctions.createAppointment(appointmentData);
            
            if (result.success) {
                // Show success message
                showSuccessModal(formData, result.data);
                
                // Optional: Send WhatsApp notification
                sendWhatsAppNotification(formData);
                
                // Reset form
                document.getElementById('booking-form').reset();
                
                // Set date to tomorrow again
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1);
                document.getElementById('book-date').value = tomorrow.toISOString().split('T')[0];
                
                console.log('Appointment created:', result.data);
            } else {
                throw new Error(result.message);
            }
            
        } catch (error) {
            console.error('Booking error:', error);
            alert(`Failed to book appointment: ${error.message}\n\nPlease try again or call us directly at +254 739 684 403.`);
        } finally {
            // Reset button state
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;
        }
    }

    // Show success modal with details
    function showSuccessModal(formData, appointmentData) {
        document.getElementById('modal-name').innerText = formData.name;
        document.getElementById('modal-service').innerText = formData.serviceText.split(' - ')[0];
        document.getElementById('modal-date').innerText = window.supabaseFunctions.formatDate(formData.date);
        document.getElementById('modal-time').innerText = formData.time;
        
        // Add appointment ID if available
        if (appointmentData && appointmentData.id) {
            const appointmentId = appointmentData.id.substring(0, 8).toUpperCase();
            const idElement = document.createElement('p');
            idElement.className = 'text-sm text-gray-500 mt-2';
            idElement.id = 'modal-id';
            idElement.innerText = `Reference: ${appointmentId}`;
            
            const modalContent = document.querySelector('#success-modal .text-gray-600');
            if (modalContent && !document.getElementById('modal-id')) {
                modalContent.parentNode.insertBefore(idElement, modalContent.nextSibling);
            }
        }
        
        // Show modal
        document.getElementById('success-modal').classList.add('active');
    }

    // Send WhatsApp notification (optional)
    function sendWhatsAppNotification(formData) {
        // Format phone for WhatsApp
        let phone = formData.phone;
        if (phone.startsWith('0')) {
            phone = '254' + phone.substring(1);
        }
        
        // Create message
        const message = `New booking from Rose Nails website:%0A%0A` +
                       `Name: ${formData.name}%0A` +
                       `Phone: ${formData.phone}%0A` +
                       `Service: ${formData.serviceText}%0A` +
                       `Date: ${formData.date}%0A` +
                       `Time: ${formData.time}%0A%0A` +
                       `Please check Supabase dashboard for details.`;
        
        // Your business WhatsApp number
        const businessNumber = '254739684403'; // Replace with your number
        
        // Create WhatsApp URL (for admin to click manually)
        const whatsappUrl = `https://wa.me/${businessNumber}?text=${message}`;
        console.log('WhatsApp notification URL:', whatsappUrl);
        
        // Note: This just logs the URL. To actually send, you'd need a backend service.
        // For now, you can manually check appointments in Supabase dashboard.
    }

    function closeModal() {
        document.getElementById('success-modal').classList.remove('active');
    }

    // Close modal on outside click
    window.onclick = function(event) {
        const modal = document.getElementById('success-modal');
        if (event.target == modal) {
            closeModal();
        }
    };
</script>
</body>
</html>
